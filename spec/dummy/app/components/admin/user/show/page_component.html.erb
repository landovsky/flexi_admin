<div class="user-detail-page" data-controller="edit">
  <!-- Breadcrumb Navigation -->
  <nav class="breadcrumb" aria-label="breadcrumb">
    <ol class="breadcrumb">
      <li class="breadcrumb-item"><%= link_to 'Uživatel', admin_users_path %></li>
      <li class="breadcrumb-item active" aria-current="page"><%= user.full_name %></li>
    </ol>
  </nav>

  <!-- Page Header -->
  <div class="page-header">
    <h1><%= user.full_name %></h1>
    <div class="header-actions">
      <%= link_to 'Back', admin_users_path, class: 'btn btn-secondary' %>
      <%= link_to 'Form Fields', admin_test_form_fields_path, class: 'btn btn-outline-primary' %>
      <button class="edit-icon btn btn-primary" data-action="click->edit#toggle">
        Edit
      </button>
      <%= button_to 'Delete', admin_user_path(user), method: :delete,
          class: 'delete-icon btn btn-danger',
          form: { data: { turbo_confirm: 'Are you sure you want to delete this user?' } } %>
    </div>
  </div>

  <!-- User Information -->
  <div class="user-info">
    <div class="info-section">
      <h3>Basic Information</h3>

      <div class="form-group">
        <label>Jméno a příjmení</label>
        <%= text_field_tag 'user[full_name]', user.full_name, class: 'form-control', disabled: true %>
      </div>

      <div class="form-group">
        <label>Email</label>
        <%= text_field_tag 'user[email]', user.email, class: 'form-control', disabled: true %>
      </div>

      <div class="form-group">
        <label>Telefon</label>
        <%= text_field_tag 'user[phone]', user.phone, class: 'form-control', disabled: true %>
      </div>

      <div class="form-group">
        <label>Osobní číslo</label>
        <%= text_field_tag 'user[personal_number]', user.personal_number, class: 'form-control', disabled: true %>
      </div>
    </div>

    <div class="info-section">
      <h3>Role & Type</h3>

      <div class="form-group">
        <label>Role</label>
        <div class="role-selector" data-controller="role-selector">
          <button class="btn <%= 'active' if user.role == 'user' %>"
                  data-role="user"
                  data-role-selector-target="button"
                  data-action="click->role-selector#select">user</button>
          <button class="btn <%= 'active' if user.role == 'admin' %>"
                  data-role="admin"
                  data-role-selector-target="button"
                  data-action="click->role-selector#select">admin</button>
        </div>
      </div>

      <div class="form-group">
        <label>Type</label>
        <div class="type-selector" data-controller="role-selector">
          <button class="btn <%= 'active' if user.user_type == 'internal' %>"
                  data-type="internal"
                  data-role-selector-target="button"
                  data-action="click->role-selector#select">internal</button>
          <button class="btn <%= 'active' if user.user_type == 'external' %>"
                  data-type="external"
                  data-role-selector-target="button"
                  data-action="click->role-selector#select">external</button>
        </div>
      </div>
    </div>

    <div class="info-section">
      <h3>Metadata</h3>

      <div class="metadata-item">
        <strong>Created:</strong>
        <%= user.created_at&.strftime('%Y-%m-%d %H:%M') || 'N/A' %>
      </div>

      <div class="metadata-item">
        <strong>Updated:</strong>
        <%= user.updated_at&.strftime('%Y-%m-%d %H:%M') || 'N/A' %>
      </div>

      <% if user.respond_to?(:last_sign_in_at) && user.last_sign_in_at %>
        <div class="metadata-item">
          <strong>Poslední přihlášení:</strong>
          <%= user.last_sign_in_at.strftime('%Y-%m-%d %H:%M') %>
        </div>
      <% end %>
    </div>
  </div>
</div>
